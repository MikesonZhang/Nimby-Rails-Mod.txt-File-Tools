<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编组生成器-朝歌</title>
    <!--
        Author:MikesonZhang
        Nationality:China
        City:NeiJiang,SiChuan Province
        WriteTime:2022,04,09 23:37

        Developer notes:
            1.This program only uses a little string splicing technology without any technical content.
            It is just convenient for non programmer players to group and arrange the game vehicle mod like a fool
            2.Technology library used: jQuery、VUE3.0、Element-ui
     -->
    <link rel="stylesheet" type="text/css" href="css/normalize.css" /><!--CSS RESET-->
    <link rel="stylesheet" type="text/css" href="css/htmleaf-demo.css"><!--演示页面样式，使用时可以不引用-->
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!--ssMenu CSS-->
    <link rel="stylesheet" href="css/ss-menu.css">
    <link rel="stylesheet" href="css/demo.css">
    <!-- my CSS -->
    <link rel="stylesheet" href="css/my.css">
</head>
<body>
<!--Start Side Sticky Menu-->
<nav class="ss-menu ">
    <ul>
        <span class="ss-badge">热</span>
        <li><a href="IndexZh.html"><i class="fa fa-car"></i>车辆Mod.txt设置</a></li>
        <span class="ss-badge">新</span>
        <li><a href="TrainEdit.html"> <i class="fa fa-car"></i> 车辆编辑器 </a></li>
        <li><a href="Building.html"> <i class="fa fa-building"></i> 建筑Mod.txt生成 </a></li>
        <li><a href="Track.html"><i class="fa fa-train"></i> 轨道Mod.txt生成</a></li>
        <li><a href="Index.html"><i class="fa fa-star"></i> 更多，敬请期待!</a></li>
    </ul>
</nav>
<!--End Side Sticky Menu-->
<div class="htmleaf-container">
    <header class="htmleaf-header">
        <h1>Nimby Rails Mod.txt file Tools
            <span>Used to facilitate setting up files</span>
            <span>车辆数据编辑器</span>
        </h1>
        <div class="htmleaf-links">
            <a class="htmleaf-icon icon-htmleaf-home-outline" href="indexZh.html" title="TencentQQ Contact Me" target="_self"><span> 联系我</span></a>
            <a class="htmleaf-icon icon-htmleaf-arrow-forward-outline" href="tencent://message/?uin=2929429848&Site=&Menu=yes" title="返回下载页" target="_blank"><span> 返回下载页</span></a>
        </div>
    </header>
    <main class="ss-main">
        <article>
            <section class="theme-picker">
                <h2> 选择风格 </h2>
                <p> 在这里挑一个你喜欢的颜色 </p>
                <button class="set-default"> 恢复默认  </button>
                <span class="red"> </span>
                <span class="yellow"> </span>
                <span class="blue"> </span>
                <span class="green"> </span>
                <span class="orange"> </span>
                <span class="brown"> </span>
                <span class="teal"> </span>
                <span class="purple"> </span>
                <div class="ad-unit">
                </div>
            </section>
            <input type="file" id="select-input"/>
            <input type="button" onclick="refresh();" value="重置" style="height: 43px;width: 50px;"></input>
            <input type="button" onclick="copy();" value="复制" style="height: 43px;width: 50px;"></input>
            <input type="button" onclick="saveFile();" value="下载" style="height: 43px;width: 50px;"></input>
            点我以后按Ctrl+C复制！
            <script type="text/javascript">
                function copy() {
                    var e = document.getElementById("content");
                    e.select(); // 选择对象
                    document.execCommand("Copy"); // 执行浏览器复制命令
                }
            </script>
            <script type="text/javascript">
                function refresh() {
                    location.reload();
                }
            </script>
            <br/>
            <textarea id="content" style="width: 800px;height: 1000px;margin-bottom: 20px;margin-top: 20px;">

            </textarea>
            </pre>
        </article>
        <div style="position: absolute;top: 50%;left: 50%;">
            <h1>使用方法：</h1>
            <h3>
                找到你要修改的Mod.txt文档，点击选择文件按钮，系统自动将文件读取到旁边的文本框
            </h3>
            <br/>
            <h4>
                只需要修改属性后面的值就可以更改火车的配置，这里提供几个提示给各位玩家：
            </h4>
            <h5 style="text-align: left;">
                <br/>max_speed=？ 最大速度，如果有一个速度较小，火车将采用最小的速度行驶
                <br/>power=？ 功率
                <br/>empty_mass=？ 火车空重
                <br/>price=？ 价格
                <br/>max_pax=？ 单车厢最大乘客数
                <br/>composition=？ 火车编组设置，有基本的了解再进行修改
                <br/>default_code=G
                <br/>default_name=CRH3C-3001 火车默认的车号
                <br/>
            </h5>
            <h4>
                <br/>不建议新手玩家修改的属性：
            </h4>
            <h5 style="text-align: left;">
                <br/>length=？
                <br/>width=？ 火车贴图高宽
                <br/>tex_base=？
                <br/>tex_top=？
                <br/>tex_decors=？ 火车贴图路径
            </h5>

        </div>
    </main>
    <div class="related">
        <div class="related" style="text-align: left">
            <h7>
          <pre>
          Author:MikesonZhang
          UI-English Translator:Ka
          Nationality:China
          City:NeiJiang,SiChuan Province
          WriteTime:2022,04,09 23:37
          v1Time:2022,04,10 19:37
          v1.1Time:2022,06,5 12:17
          </pre>
            </h7>
        </div>
    </div>
</div>

<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
<script src="js/jquery.ss.menu.js"></script>
<script>
    $(document).ready(function(){
        $(".ss-menu").ssMenu();
    });
</script>
<script>
    $(function(){
        var ssMenu = $(".ss-menu");
        var theme = $(".theme-picker").find("span");
        $(theme).click(function(y){
            y = $(this).attr("class");
            $(ssMenu).removeClass().addClass("ss-menu " +y); //Aaah what a nice
        });
        $(".set-default").click(function(){
            $(ssMenu).removeClass().addClass("ss-menu default");
        });
    });
    function exportRaw(data, name) {
        let urlObject = window.URL || window.webkitURL || window;
        let export_blob = new Blob([data]);
        let save_link = document.createElementNS("http://www.w3.org/1999/xhtml", "a")
        save_link.href = urlObject.createObjectURL(export_blob);
        save_link.download = name;
        save_link.click();
    }
    function saveFile() {
        // 导出数据'自定义的数据内容，可以是服务端返回的！';
        //手动输入数据
        let data = document.getElementsByTagName("textarea").content.innerHTML;
        console.log(data)
        // let data1 = document.getElementById('#content').innerText;
        let name1 = 'mod.txt';//定义文件名称
        exportRaw(data, name1);
    }
    document.getElementById("select-input").addEventListener("change", (e) =>{
        //获取选择的文件对象
        let file = e.target.files[0];
        // 检测浏览器对FileReader的支持
        if(window.FileReader) {
            // 创建FileReader对象(文件对象)
            const reader = new FileReader();


            /*----------    6种事件模型    ---------*/
            // 开始读取时：
            reader.onloadstart = function(e) {

            };
            // 正在读取：
            reader.onprogress = function(e) {

            };
            // 读取出错时：
            reader.onerror = function(e) {

            };
            // 读取中断时：
            reader.onabort = function(e) {

            };
            // 读取成功时：
            reader.onload = function(e) {
                    document.getElementById("content").innerHTML = e.target.result;

            };
            // 读取完成，无论成功失败：
            reader.onloadend = function(e) {

            };
            if(/image\/\w+/.test(file.type)){
                reader.readAsDataURL(file);
            }else{
                // 输出文件
                reader.readAsText(file,"utf-8");
            };
        }else {
            alert("Not supported by your browser!");
        };
    }, false);
</script>
</body>
</html>